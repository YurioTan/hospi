<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <!-- sale.customer.db form view -->
  <record id="sale_customer_db_view_form" model="ir.ui.view">
    <field name="name">sale.customer.db.form</field>
    <field name="model">sale.customer.db</field>
    <field name="arch" type="xml">
      <form string="Customer DB">
        <sheet>
          <group>
            <group string="Sale Info">
              <field name="input_date"/>
              <field name="sale_order_id"/>
              <field name="partner_id" domain="[('alias_name','!=',False)]" />
              <field name="delivery_partner_id" domain="[('alias_name','!=',False)]" />
              <field name="partner_phone"/>
              <field name="partner_mobile"/>
              <field name="partner_email"/>
              <field name="partner_location_id"/>
              <field name="partner_category_id"/>
              <field name="partner_class_id"/>
              <field name="partner_area_map_id"/>
              <field name="partner_level_id"/>
            </group>
            <group string="Product">
              <field name="brand_id"/>
              <field name="product_id" domain="[('brand_id','=',brand_id)]" context="{'product_search': True}"/>
              <field name="serial_number" domain="[('product_id','=',product_id)]" />
              <field name="install_date"/>
              <field name="tracking_number"/>
            </group>            
          </group>
        </sheet>
        <div class="oe_chatter">
          <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
          <field name="message_ids" widget="mail_thread"/>
        </div>
      </form>
    </field>
  </record>

  <!-- sale.customer.db tree view -->
  <record id="sale_customer_db_view_tree" model="ir.ui.view">
    <field name="name">sale.customer.db.tree</field>
    <field name="model">sale.customer.db</field>
    <field name="arch" type="xml">
      <tree>
        <field name="input_date"/>
        <field name="sale_order_id"/>
        <field name="partner_id"/>
        <field name="delivery_partner_id"/>
        <field name="brand_id"/>
        <field name="product_id" context="{'product_search': True}"/>
      </tree>
    </field>
  </record>

  <!-- sale.customer.db search view -->
  <record id="sale_customer_db_view_search" model="ir.ui.view">
    <field name="name">sale.customer.db.search</field>
    <field name="model">sale.customer.db</field>
    <field name="arch" type="xml">
      <search string="Search Customer DB">
        <field name="sale_order_id"/>
        <field name="partner_id"/>
        <field name="brand_id"/>
        <field name="product_id"/>
        <field name="serial_number"/>
        <filter name="has_so" string="Has SO?" domain="[('sale_order_id','!=', False)]"/>
        <group expand="0" string="Group By...">
          <filter name="groupby_partner" string="Contact" domain="[]" context="{'group_by' : 'partner_id'}" />
          <filter name="groupby_input_date" string="Input Date" domain="[]" context="{'group_by' : 'input_date:month'}" />
          <filter name="groupby_product" string="Product" domain="[]" context="{'group_by' : 'product_id'}" />
        </group>
      </search>
    </field>
  </record>


  <record id="action_sale_customer_db" model="ir.actions.act_window">
    <field name="name">Customer DB</field>
    <field name="type">ir.actions.act_window</field>
    <field name="res_model">sale.customer.db</field>
    <field name="view_mode">tree,form</field>
    <field name="context">{'product_search': True}</field>
    <field name="help" type="html">
      <p class="oe_view_nocontent_create">
          <!-- Add Text Here -->
      </p>
    </field>
  </record>

  <menuitem
    id="menu_customer_db_root"
    name="Customer DB"
    web_icon="hn_sale,static/description/customer_db_icon.png"
    sequence="523"
  />

  <menuitem id="menu_sale_customer_db" name="Customer DB" parent="menu_customer_db_root"
    action="action_sale_customer_db" sequence="1"/>

</odoo>